# ============================================================================
# PROMETHEUS CONFIGURATION - v1.0.0 Supreme
# Arquivo de configuração master do sistema
# ============================================================================

system:
  name: "PROMETHEUS"
  version: "1.0.0-supreme"
  description: "Universal Autonomous Agent - The Real Jarvis"
  author: "Tigrão & Cláudio Opus"
  environment: "production"  # development, staging, production

# ============================================================================
# CORE SETTINGS
# ============================================================================
core:
  max_concurrent_tasks: 5
  max_queued_tasks: 50
  task_timeout_seconds: 3600  # 1 hora máximo por tarefa
  retry_max_attempts: 3
  retry_delay_seconds: 10
  
  # Níveis de log
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  log_file: "prometheus.log"
  log_max_size_mb: 100
  log_rotation_count: 5
  
  # Performance
  enable_profiling: false
  enable_metrics: true
  metrics_port: 9090

# ============================================================================
# AI PROVIDERS
# ============================================================================
ai_providers:
  claude:
    enabled: true
    api_key: "${CLAUDE_API_KEY}"  # Usar variável de ambiente
    model: "claude-3-opus-20240229"
    max_tokens: 4096
    temperature: 0.7
    timeout: 30
    rate_limit: 100  # requests por minuto
    cost_per_1k_tokens: 0.015
    capabilities:
      - reasoning
      - analysis
      - coding
      - planning
    
  gpt4:
    enabled: true
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-4-turbo-preview"
    max_tokens: 4096
    temperature: 0.7
    timeout: 30
    rate_limit: 60
    cost_per_1k_tokens: 0.03
    capabilities:
      - creativity
      - coding
      - vision
      - function_calling
      
  perplexity:
    enabled: true
    api_key: "${PERPLEXITY_API_KEY}"
    model: "pplx-70b-online"
    max_tokens: 4096
    temperature: 0.5
    timeout: 20
    rate_limit: 100
    cost_per_1k_tokens: 0.001
    capabilities:
      - real_time_search
      - fact_checking
      - research
      
  grok:
    enabled: false  # Aguardando API
    api_key: "${GROK_API_KEY}"
    model: "grok-1"
    max_tokens: 4096
    temperature: 0.6
    timeout: 25
    rate_limit: 50
    cost_per_1k_tokens: 0.002
    capabilities:
      - data_analysis
      - humor
      - real_time
      
  gemini:
    enabled: true
    api_key: "${GEMINI_API_KEY}"
    model: "gemini-pro"
    max_tokens: 4096
    temperature: 0.7
    timeout: 20
    rate_limit: 100
    cost_per_1k_tokens: 0.0001
    capabilities:
      - multimodal
      - fast_inference
      - cost_effective

# ============================================================================
# CONSENSUS ENGINE
# ============================================================================
consensus:
  enabled: true
  min_providers_for_consensus: 2
  max_providers_for_consensus: 5
  
  # Quando usar consenso
  triggers:
    - priority: "critical"
    - task_type: "financial"
    - task_type: "security"
    - complexity: "very_complex"
    
  # Pesos para votação
  voting_weights:
    claude: 1.5     # Mais peso para raciocínio
    gpt4: 1.3       # Peso alto para criatividade
    perplexity: 1.2 # Peso médio
    grok: 1.0
    gemini: 0.9
    
  arbiter: "gpt4"  # Aurora como árbitro final

# ============================================================================
# EXECUTION LAYER
# ============================================================================
execution:
  browser_control:
    enabled: true
    primary_tool: "playwright"
    fallback_tools:
      - "selenium"
      - "pyautogui"
    
    playwright_config:
      browser: "chromium"  # chromium, firefox, webkit
      headless: false  # False para debug
      slow_mo: 100  # Milissegundos entre ações
      timeout: 30000
      viewport_width: 1920
      viewport_height: 1080
      
    stealth_mode:
      enabled: true
      use_proxies: false
      rotate_user_agents: true
      random_delays: true
      min_delay_ms: 500
      max_delay_ms: 2000
      
  system_control:
    enabled: true
    allowed_operations:
      - file_read
      - file_write
      - file_delete
      - process_start
      - process_stop
      - registry_read
      # - registry_write  # Desabilitado por segurança
      
    restricted_paths:
      - "C:\\Windows\\System32"
      - "C:\\Program Files"
      - "/usr/bin"
      - "/etc"
      
  api_control:
    enabled: true
    integrations:
      n8n:
        enabled: true
        base_url: "${N8N_URL}"
        api_key: "${N8N_API_KEY}"
        
      whatsapp:
        enabled: true
        api_url: "${WHATSAPP_API_URL}"
        token: "${WHATSAPP_TOKEN}"
        
      rd_station:
        enabled: true
        client_id: "${RD_CLIENT_ID}"
        client_secret: "${RD_CLIENT_SECRET}"
        
      supabase:
        enabled: true
        url: "${SUPABASE_URL}"
        anon_key: "${SUPABASE_ANON_KEY}"
        service_key: "${SUPABASE_SERVICE_KEY}"
        
      google:
        enabled: true
        credentials_file: "google_credentials.json"
        scopes:
          - "https://www.googleapis.com/auth/drive"
          - "https://www.googleapis.com/auth/gmail.send"
          - "https://www.googleapis.com/auth/calendar"

# ============================================================================
# MEMORY SYSTEM
# ============================================================================
memory:
  short_term:
    type: "redis"  # redis ou memory
    redis_config:
      host: "localhost"
      port: 6379
      db: 0
      password: "${REDIS_PASSWORD}"
    ttl_hours: 24
    max_entries: 10000
    
  long_term:
    type: "supabase_vector"
    embedding_model: "text-embedding-ada-002"
    embedding_dimensions: 1536
    max_results: 20
    similarity_threshold: 0.7
    
  procedural:
    enabled: true
    storage_path: "./templates"
    auto_learn: true
    min_success_rate: 0.8  # Taxa mínima para salvar template
    
  episodic:
    enabled: true
    retention_days: 90
    compression_enabled: true
    
# ============================================================================
# SECURITY
# ============================================================================
security:
  credential_management:
    type: "encrypted_file"  # encrypted_file, bitwarden, aws_secrets
    encryption_key: "${MASTER_KEY}"
    file_path: "./secrets.enc"
    
  permissions:
    require_approval_for:
      - financial_operations
      - delete_operations
      - system_modifications
      - external_api_calls_above_threshold
      
    approval_methods:
      - whatsapp_confirmation
      - email_confirmation
      # - voice_confirmation
      
    approval_timeout_minutes: 30
    
  audit:
    enabled: true
    log_all_actions: true
    retention_days: 365
    alert_on_suspicious: true
    
  rate_limiting:
    enabled: true
    max_requests_per_minute: 100
    max_tokens_per_hour: 1000000
    max_cost_per_day_usd: 100

# ============================================================================
# INTERFACE
# ============================================================================
interface:
  voice:
    enabled: true
    stt_provider: "whisper"  # whisper, google, azure
    tts_provider: "elevenlabs"  # elevenlabs, google, azure
    wake_word: "prometheus"
    language: "pt-BR"
    voice_id: "josh"  # ElevenLabs voice ID
    
  chat:
    enabled: true
    streaming_responses: true
    max_message_length: 4000
    show_thinking_process: false
    
  web_dashboard:
    enabled: true
    port: 8080
    host: "0.0.0.0"
    ssl_enabled: false
    auth_required: true
    
  notifications:
    enabled: true
    channels:
      - whatsapp
      - email
      # - telegram
      # - slack
    
    triggers:
      - task_completed
      - task_failed
      - approval_required
      - system_error
      - daily_summary

# ============================================================================
# RESILIENCE
# ============================================================================
resilience:
  error_handling:
    max_retries: 3
    retry_strategies:
      - exponential_backoff
      - circuit_breaker
      - fallback_to_simpler
      
  recovery:
    auto_recovery: true
    checkpoint_interval_minutes: 5
    backup_before_critical_ops: true
    
  monitoring:
    health_check_interval_seconds: 30
    alert_on_failure: true
    auto_restart_on_crash: true
    max_restart_attempts: 5

# ============================================================================
# OPTIMIZATION
# ============================================================================
optimization:
  caching:
    enabled: true
    cache_responses: true
    cache_ttl_minutes: 60
    max_cache_size_mb: 1000
    
  parallel_execution:
    enabled: true
    max_parallel_tasks: 3
    use_async: true
    
  cost_optimization:
    enabled: true
    prefer_cheaper_providers: true
    batch_similar_requests: true
    use_cache_when_possible: true
    
  performance:
    enable_profiling: false
    optimize_prompts: true
    compress_large_contexts: true
    lazy_load_modules: true

# ============================================================================
# DEVELOPMENT
# ============================================================================
development:
  debug_mode: false
  verbose_logging: false
  mock_ai_responses: false
  save_all_interactions: true
  enable_playground: true
  hot_reload: true

# ============================================================================
# SCHEDULING
# ============================================================================
scheduling:
  enabled: true
  timezone: "America/Sao_Paulo"
  
  recurring_tasks:
    daily_report:
      enabled: true
      time: "09:00"
      task: "generate_daily_summary"
      
    backup:
      enabled: true
      time: "03:00"
      task: "backup_system"
      
    cleanup:
      enabled: true
      time: "02:00"
      task: "cleanup_old_data"

# ============================================================================
# FEATURE FLAGS
# ============================================================================
features:
  browser_automation: true
  voice_control: true
  multi_ai_consensus: true
  auto_learning: true
  template_generation: true
  visual_recognition: true
  code_execution: true
  api_integration: true
  real_time_search: true
  document_generation: true
  social_media_management: true
  email_automation: true
  data_analysis: true
  workflow_automation: true

# ============================================================================
# MODULES TO LOAD
# ============================================================================
modules:
  core:
    - "task_analyzer"
    - "execution_planner"
    - "ai_orchestrator"
    - "event_bus"
    
  intelligence:
    - "claude_provider"
    - "gpt_provider"
    - "perplexity_provider"
    - "gemini_provider"
    - "consensus_engine"
    
  execution:
    - "browser_controller"
    - "system_controller"
    - "api_controller"
    
  memory:
    - "memory_manager"
    - "vector_store"
    - "learning_engine"
    
  interface:
    - "voice_interface"
    - "chat_interface"
    - "web_dashboard"
    
  security:
    - "credential_manager"
    - "permission_manager"
    - "audit_logger"

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
